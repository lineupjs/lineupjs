<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>LineUp alpha</title>

  <link href="../node_modules/font-awesome/css/font-awesome.css" rel="stylesheet" type='text/css'>
  <link href="../../node_modules/font-awesome/css/font-awesome.css" rel="stylesheet" type='text/css'>

    <link href="../build/style.css" rel="stylesheet">

    <style>
        .lu {
            clear: both;
            position: absolute;
            top: 1px;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 0;
            overflow: auto;
        }

    </style>
</head>
<body>
<script src="../node_modules/d3/d3.js"></script>
<script src="../../node_modules/d3/d3.js"></script>
<script src="../build/LineUpJS.js"></script>
<script>
    window.onload = function () {
        const hierarchy = {
            name: '0',
            color: 'black',
            children: [{
                name: 'a1',
                color: 'blue',
                children: [{
                    name: 'a2',
                    color: 'blue'
                }, {
                    name: 'b2',
                    color: 'red',
                    children: [{
                        name: 'a3',
                        color: 'blue'
                    }, {
                        name: 'b3',
                        color: 'red'
                    }, {
                        name: 'c3',
                        color: 'green'
                    }]
                }]
            }, {
                name: 'b1',
                color: 'red',
                children: [{
                    name: 'b2',
                    color: 'red'
                }, {
                    name: 'c2',
                    color: 'green'
                }]
            }]
        };
        const leaves = [];
        function visit(prefix, node) {
            if (node.children && node.children.length > 0) {
                node.children.forEach(function(n) {
                    visit(prefix + node.name + '.', n);
                });
            } else {
                leaves.push(prefix + node.name);
            }
        }
        visit('', hierarchy);
        const data = [];
        for (let i = 0 ; i < leaves.length * 3; i++) {
            data.push({ a: 'Row' + i, c: i, b: leaves[i % leaves.length]});
        }

        const desc = [
            {label: 'A', type: 'string', column: 'a'},
            {label: 'C', type: 'number', column: 'c', domain: [0, leaves.length*3]},
            {label: 'B', type: 'hierarchy', column: 'b', hierarchy: hierarchy}
        ];

        const p = LineUpJS.createLocalStorage(data, desc);
        p.deriveDefault();

        const lineup = LineUpJS.create(p, document.body, {
            body: {
                renderer: 'svg'
            }
        });
        lineup.update();
    };

</script>

</body>
</html>
