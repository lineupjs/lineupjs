<!doctype html>
<html>
  <head lang="en">
    <meta charset="UTF-8" />
    <title>LineUp AIDS Test</title>
    <link href="./LineUpJS.css" rel="stylesheet" />
    <link href="./demo.css" rel="stylesheet" />
  </head>
  <body>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="./LineUpJS.js"></script>
    <script>
      window.onload = function () {
        d3.csv(
          './groups.csv',
          function row(d) {
            d.value = +d.value; // make value numerical
            return d;
          },
          function done(error, data) {
            if (error) throw error;

            const desc = [
              { column: 'id', type: 'string' },
              { column: 'category', type: 'categorical' },
              { column: 'value', type: 'number', domain: [0, 100] },
            ];
            console.log('data', data);
            const p = new LineUpJS.LocalDataProvider(data, desc);
            p.deriveDefault();
            p.getLastRanking().insert(p.create(LineUpJS.createSelectionDesc()), 1);

            const lineup = new LineUpJS.Taggle(document.body, p);
            lineup.update();
          }
        );
      };
    </script>
  </body>
</html>
